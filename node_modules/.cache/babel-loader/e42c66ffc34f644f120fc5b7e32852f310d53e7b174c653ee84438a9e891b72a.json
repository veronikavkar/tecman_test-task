{"ast":null,"code":"import Table from \"./common/Table.vue\";\nimport SideModal from \"../components/common/SideModal.vue\";\nexport default {\n  name: \"DataTable\",\n  components: {\n    Table,\n    SideModal\n  },\n  data() {\n    return {\n      selectAllChecked: false,\n      someSelected: false,\n      isModalOpen: false,\n      selectedRowData: null,\n      columns: [{\n        label: \"Дата и время\",\n        key: \"dateTime\"\n      }, {\n        label: \"Устройство\",\n        key: \"device\"\n      }, {\n        label: \"Тип ошибки\",\n        key: \"errorType\"\n      }, {\n        label: \"Текст ошибки\",\n        key: \"errorText\"\n      }],\n      tableData: [{\n        id: 1,\n        dateTime: \"20.01.24 14:08:12\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры ХОТ ГАЗ\",\n        selected: false\n      }, {\n        id: 2,\n        dateTime: \"13:23:30\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 3,\n        dateTime: \"12:45:45\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Эрв/Трв Авария\",\n        selected: false\n      }, {\n        id: 4,\n        dateTime: \"12:38:56\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария высокое давление\",\n        selected: false\n      }, {\n        id: 5,\n        dateTime: \"11:16:34\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 6,\n        dateTime: \"10:24:56\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 7,\n        dateTime: \"10:04:16\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 8,\n        dateTime: \"10:04:16\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 9,\n        dateTime: \"10:04:16\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 10,\n        dateTime: \"10:04:16\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 11,\n        dateTime: \"10:04:16\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 12,\n        dateTime: \"10:04:16\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 13,\n        dateTime: \"10:04:16\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 14,\n        dateTime: \"10:04:16\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 15,\n        dateTime: \"10:04:16\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }, {\n        id: 16,\n        dateTime: \"10:04:16\",\n        device: \"9000000004\",\n        errorType: \"Ошибка\",\n        errorText: \"Авария датчика температуры Жидкого фреона\",\n        selected: false\n      }]\n    };\n  },\n  methods: {\n    handleRowSelect(row) {\n      const rowIndex = this.tableData.findIndex(item => item.id === row.id);\n      if (rowIndex !== -1) {\n        this.tableData[rowIndex].selected = !this.tableData[rowIndex].selected;\n        this.updateSelectAllState();\n        this.tableData = [...this.tableData];\n      }\n    },\n    handleSelectAll(selected) {\n      this.tableData.forEach(row => {\n        if ([1, 2, 3, 5].includes(row.id)) {\n          row.selected = selected;\n        }\n      });\n      this.tableData = [...this.tableData];\n      this.someSelected = true;\n      this.selectAllChecked = false;\n    },\n    updateSelectAllState() {\n      const rowsToCheck = this.tableData.filter(row => [1, 2, 3, 5].includes(row.id));\n      const selectedCount = rowsToCheck.filter(row => row.selected).length;\n      const totalRows = rowsToCheck.length;\n      this.selectAllChecked = selectedCount === totalRows;\n      this.someSelected = selectedCount > 0 && selectedCount < totalRows;\n      if (selectedCount === 0) {\n        this.selectAllChecked = false;\n        this.someSelected = false;\n      }\n    },\n    handleCellClick(row, key) {\n      if (key === \"device\") {\n        this.selectedRowData = {\n          ...row\n        };\n        this.isModalOpen = true;\n      }\n    }\n  }\n};","map":{"version":3,"names":["Table","SideModal","name","components","data","selectAllChecked","someSelected","isModalOpen","selectedRowData","columns","label","key","tableData","id","dateTime","device","errorType","errorText","selected","methods","handleRowSelect","row","rowIndex","findIndex","item","updateSelectAllState","handleSelectAll","forEach","includes","rowsToCheck","filter","selectedCount","length","totalRows","handleCellClick"],"sources":["C:\\Users\\petro\\OneDrive\\Desktop\\tecman\\tecman_test-task\\src\\components\\DataTable.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <Table\r\n      :columns=\"columns\"\r\n      :rows=\"tableData\"\r\n      rowKey=\"id\"\r\n      :selectable=\"true\"\r\n      :selectAllChecked=\"selectAllChecked\"\r\n      :someSelected=\"someSelected\"\r\n      @select-all=\"handleSelectAll\"\r\n      @select-row=\"handleRowSelect\"\r\n      tableClass=\"error-table\"\r\n      @cell-click=\"handleCellClick\"\r\n    />\r\n    <SideModal\r\n      v-if=\"isModalOpen\"\r\n      :data=\"selectedRowData\"\r\n      @close=\"isModalOpen = false\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Table from \"./common/Table.vue\";\r\nimport SideModal from \"../components/common/SideModal.vue\";\r\nexport default {\r\n  name: \"DataTable\",\r\n  components: {\r\n    Table,\r\n    SideModal,\r\n  },\r\n  data() {\r\n    return {\r\n      selectAllChecked: false,\r\n      someSelected: false,\r\n      isModalOpen: false,\r\n      selectedRowData: null,\r\n      columns: [\r\n        { label: \"Дата и время\", key: \"dateTime\" },\r\n        { label: \"Устройство\", key: \"device\" },\r\n        { label: \"Тип ошибки\", key: \"errorType\" },\r\n        { label: \"Текст ошибки\", key: \"errorText\" },\r\n      ],\r\n      tableData: [\r\n        {\r\n          id: 1,\r\n          dateTime: \"20.01.24 14:08:12\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры ХОТ ГАЗ\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 2,\r\n          dateTime: \"13:23:30\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 3,\r\n          dateTime: \"12:45:45\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Эрв/Трв Авария\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 4,\r\n          dateTime: \"12:38:56\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария высокое давление\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 5,\r\n          dateTime: \"11:16:34\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 6,\r\n          dateTime: \"10:24:56\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 7,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 8,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 9,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 10,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 11,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 12,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 13,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 14,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 15,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 16,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    handleRowSelect(row) {\r\n      const rowIndex = this.tableData.findIndex((item) => item.id === row.id);\r\n\r\n      if (rowIndex !== -1) {\r\n        this.tableData[rowIndex].selected = !this.tableData[rowIndex].selected;\r\n        this.updateSelectAllState();\r\n        this.tableData = [...this.tableData];\r\n      }\r\n    },\r\n    handleSelectAll(selected) {\r\n      this.tableData.forEach((row) => {\r\n        if ([1, 2, 3, 5].includes(row.id)) {\r\n          row.selected = selected;\r\n        }\r\n      });\r\n\r\n      this.tableData = [...this.tableData];\r\n      this.someSelected = true;\r\n      this.selectAllChecked = false;\r\n    },\r\n    updateSelectAllState() {\r\n      const rowsToCheck = this.tableData.filter((row) =>\r\n        [1, 2, 3, 5].includes(row.id)\r\n      );\r\n\r\n      const selectedCount = rowsToCheck.filter((row) => row.selected).length;\r\n      const totalRows = rowsToCheck.length;\r\n\r\n      this.selectAllChecked = selectedCount === totalRows;\r\n\r\n      this.someSelected = selectedCount > 0 && selectedCount < totalRows;\r\n\r\n      if (selectedCount === 0) {\r\n        this.selectAllChecked = false;\r\n        this.someSelected = false;\r\n      }\r\n    },\r\n\r\n    handleCellClick(row, key) {\r\n      if (key === \"device\") {\r\n        this.selectedRowData = { ...row };\r\n        this.isModalOpen = true;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.error-table tbody tr td:nth-child(3) {\r\n  color: #0072c0;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}