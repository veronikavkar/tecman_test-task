{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Table = _resolveComponent(\"Table\");\n  const _component_SideModal = _resolveComponent(\"SideModal\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_Table, {\n    columns: $data.columns,\n    rows: $data.tableData,\n    rowKey: \"id\",\n    selectable: true,\n    selectAllChecked: $data.selectAllChecked,\n    someSelected: $data.someSelected,\n    onSelectAll: $options.handleSelectAll,\n    onSelectRow: $options.handleRowSelect,\n    tableClass: \"error-table\",\n    onCellClick: $options.handleCellClick\n  }, null, 8 /* PROPS */, [\"columns\", \"rows\", \"selectAllChecked\", \"someSelected\", \"onSelectAll\", \"onSelectRow\", \"onCellClick\"]), $data.isModalOpen ? (_openBlock(), _createBlock(_component_SideModal, {\n    key: 0,\n    data: $data.selectedRowData,\n    onClose: _cache[0] || (_cache[0] = $event => $data.isModalOpen = false)\n  }, null, 8 /* PROPS */, [\"data\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["_createElementBlock","_createVNode","_component_Table","columns","$data","rows","tableData","rowKey","selectable","selectAllChecked","someSelected","onSelectAll","$options","handleSelectAll","onSelectRow","handleRowSelect","tableClass","onCellClick","handleCellClick","isModalOpen","_createBlock","_component_SideModal","key","data","selectedRowData","onClose","_cache","$event","_createCommentVNode"],"sources":["C:\\Users\\petro\\OneDrive\\Desktop\\tecman\\tecman_test-task\\src\\components\\DataTable.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <Table\r\n      :columns=\"columns\"\r\n      :rows=\"tableData\"\r\n      rowKey=\"id\"\r\n      :selectable=\"true\"\r\n      :selectAllChecked=\"selectAllChecked\"\r\n      :someSelected=\"someSelected\"\r\n      @select-all=\"handleSelectAll\"\r\n      @select-row=\"handleRowSelect\"\r\n      tableClass=\"error-table\"\r\n      @cell-click=\"handleCellClick\"\r\n    />\r\n    <SideModal\r\n      v-if=\"isModalOpen\"\r\n      :data=\"selectedRowData\"\r\n      @close=\"isModalOpen = false\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Table from \"./common/Table.vue\";\r\nimport SideModal from \"../components/common/SideModal.vue\";\r\nexport default {\r\n  name: \"DataTable\",\r\n  components: {\r\n    Table,\r\n    SideModal,\r\n  },\r\n  data() {\r\n    return {\r\n      selectAllChecked: false,\r\n      someSelected: false,\r\n      isModalOpen: false,\r\n      selectedRowData: null,\r\n      columns: [\r\n        { label: \"Дата и время\", key: \"dateTime\" },\r\n        { label: \"Устройство\", key: \"device\" },\r\n        { label: \"Тип ошибки\", key: \"errorType\" },\r\n        { label: \"Текст ошибки\", key: \"errorText\" },\r\n      ],\r\n      tableData: [\r\n        {\r\n          id: 1,\r\n          dateTime: \"20.01.24 14:08:12\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры ХОТ ГАЗ\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 2,\r\n          dateTime: \"13:23:30\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 3,\r\n          dateTime: \"12:45:45\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Эрв/Трв Авария\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 4,\r\n          dateTime: \"12:38:56\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария высокое давление\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 5,\r\n          dateTime: \"11:16:34\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 6,\r\n          dateTime: \"10:24:56\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 7,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 8,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 9,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 10,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 11,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 12,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 13,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 14,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 15,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n        {\r\n          id: 16,\r\n          dateTime: \"10:04:16\",\r\n          device: \"9000000004\",\r\n          errorType: \"Ошибка\",\r\n          errorText: \"Авария датчика температуры Жидкого фреона\",\r\n          selected: false,\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    handleRowSelect(row) {\r\n      const rowIndex = this.tableData.findIndex((item) => item.id === row.id);\r\n\r\n      if (rowIndex !== -1) {\r\n        this.tableData[rowIndex].selected = !this.tableData[rowIndex].selected;\r\n        this.updateSelectAllState();\r\n        this.tableData = [...this.tableData];\r\n      }\r\n    },\r\n    handleSelectAll(selected) {\r\n      this.tableData.forEach((row) => {\r\n        if ([1, 2, 3, 5].includes(row.id)) {\r\n          row.selected = selected;\r\n        }\r\n      });\r\n\r\n      this.tableData = [...this.tableData];\r\n      this.someSelected = true;\r\n      this.selectAllChecked = false;\r\n    },\r\n    updateSelectAllState() {\r\n      const rowsToCheck = this.tableData.filter((row) =>\r\n        [1, 2, 3, 5].includes(row.id)\r\n      );\r\n\r\n      const selectedCount = rowsToCheck.filter((row) => row.selected).length;\r\n      const totalRows = rowsToCheck.length;\r\n\r\n      this.selectAllChecked = selectedCount === totalRows;\r\n\r\n      this.someSelected = selectedCount > 0 && selectedCount < totalRows;\r\n\r\n      if (selectedCount === 0) {\r\n        this.selectAllChecked = false;\r\n        this.someSelected = false;\r\n      }\r\n    },\r\n\r\n    handleCellClick(row, key) {\r\n      if (key === \"device\") {\r\n        this.selectedRowData = { ...row };\r\n        this.isModalOpen = true;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.error-table tbody tr td:nth-child(3) {\r\n  color: #0072c0;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"],"mappings":";;;;uBACEA,mBAAA,CAkBM,cAjBJC,YAAA,CAWEC,gBAAA;IAVCC,OAAO,EAAEC,KAAA,CAAAD,OAAO;IAChBE,IAAI,EAAED,KAAA,CAAAE,SAAS;IAChBC,MAAM,EAAC,IAAI;IACVC,UAAU,EAAE,IAAI;IAChBC,gBAAgB,EAAEL,KAAA,CAAAK,gBAAgB;IAClCC,YAAY,EAAEN,KAAA,CAAAM,YAAY;IAC1BC,WAAU,EAAEC,QAAA,CAAAC,eAAe;IAC3BC,WAAU,EAAEF,QAAA,CAAAG,eAAe;IAC5BC,UAAU,EAAC,aAAa;IACvBC,WAAU,EAAEL,QAAA,CAAAM;iIAGPd,KAAA,CAAAe,WAAW,I,cADnBC,YAAA,CAIEC,oBAAA;IAlBNC,GAAA;IAgBOC,IAAI,EAAEnB,KAAA,CAAAoB,eAAe;IACrBC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEvB,KAAA,CAAAe,WAAW;uCAjBzBS,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}